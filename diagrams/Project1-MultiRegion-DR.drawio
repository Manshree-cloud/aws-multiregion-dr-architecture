<mxfile host="app.diagrams.net" modified="2025-08-27T00:00:00.000Z" agent="ChatGPT" version="22.0.0">
  <diagram id="dr-arch-pro" name="Multi-Region DR - Professional">
    <mxGraphModel dx="1600" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1920" pageHeight="1080" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Header -->
        <mxCell id="hdr" value="Multi-Region Disaster Recovery — AWS (IaC)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#263238;fontColor=#FFFFFF;strokeColor=#263238;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="40" y="10" width="1840" height="40" as="geometry"/>
        </mxCell>

        <!-- Client / Internet -->
        <mxCell id="client" value="Client / User" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F7FA;strokeColor=#006064;align=center;" vertex="1" parent="1">
          <mxGeometry x="80" y="80" width="160" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="internet" value="Route 53 (Failover DNS)&#xa;Health Checks (HTTPS)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F1F8E9;strokeColor=#2E7D32;align=center;" vertex="1" parent="1">
          <mxGeometry x="270" y="80" width="220" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="edge_client_dns" style="endArrow=block;endFill=1;strokeColor=#006064;" edge="1" parent="1" source="client" target="internet">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Observability / Notifications -->
        <mxCell id="cw" value="CloudWatch&#xa;Metrics &amp; Alarms" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#EDE7F6;strokeColor=#5E35B1;align=center;" vertex="1" parent="1">
          <mxGeometry x="1560" y="120" width="170" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="sns" value="SNS Topic&#xa;Email Notification" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#F9A825;align=center;" vertex="1" parent="1">
          <mxGeometry x="1750" y="120" width="130" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="edge_cw_sns" style="endArrow=block;endFill=1;strokeColor=#5E35B1;" edge="1" parent="1" source="cw" target="sns">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Primary Region -->
        <mxCell id="regionA" value="Primary Region — ca-central-1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1E88E5;fontStyle=1;align=left;spacing=8;" vertex="1" parent="1">
          <mxGeometry x="80" y="200" width="880" height="640" as="geometry"/>
        </mxCell>

          <!-- S3 Source (regional, outside VPC) -->
          <mxCell id="s3_src" value="S3 (Source)&#xa;Versioned + SSE" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0288D1;align=center;" vertex="1" parent="regionA">
            <mxGeometry x="660" y="40" width="200" height="70" as="geometry"/>
          </mxCell>

          <!-- VPC -->
          <mxCell id="vpcA" value="VPC (10.31.0.0/16)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1976D2;align=left;spacing=8;" vertex="1" parent="regionA">
            <mxGeometry x="20" y="120" width="840" height="480" as="geometry"/>
          </mxCell>

          <!-- Public Subnets -->
          <mxCell id="pubA1" value="Public Subnet A" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#FB8C00;align=left;spacing=6;" vertex="1" parent="vpcA">
            <mxGeometry x="20" y="20" width="390" height="170" as="geometry"/>
          </mxCell>
          <mxCell id="pubA2" value="Public Subnet B" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#FB8C00;align=left;spacing=6;" vertex="1" parent="vpcA">
            <mxGeometry x="430" y="20" width="390" height="170" as="geometry"/>
          </mxCell>

          <!-- Private Subnets -->
          <mxCell id="privA1" value="Private Subnet A" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#43A047;align=left;spacing=6;" vertex="1" parent="vpcA">
            <mxGeometry x="20" y="210" width="390" height="190" as="geometry"/>
          </mxCell>
          <mxCell id="privA2" value="Private Subnet B" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#43A047;align=left;spacing=6;" vertex="1" parent="vpcA">
            <mxGeometry x="430" y="210" width="390" height="190" as="geometry"/>
          </mxCell>

          <!-- ASG + EC2 in Public Subnets -->
          <mxCell id="asgA" value="ASG (desired=1)" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;strokeColor=#1976D2;align=center;" vertex="1" parent="vpcA">
            <mxGeometry x="320" y="0" width="200" height="30" as="geometry"/>
          </mxCell>
          <mxCell id="ec2A1" value="EC2 A (NGINX)" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#1976D2;align=center;" vertex="1" parent="pubA1">
            <mxGeometry x="40" y="70" width="150" height="50" as="geometry"/>
          </mxCell>
          <mxCell id="ec2A2" value="EC2 B (standby)" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#1976D2;align=center;dashed=1;" vertex="1" parent="pubA2">
            <mxGeometry x="40" y="70" width="150" height="50" as="geometry"/>
          </mxCell>

          <!-- RDS in Private -->
          <mxCell id="rdsA" value="RDS MySQL (private)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#8E24AA;align=center;" vertex="1" parent="privA1">
            <mxGeometry x="210" y="60" width="160" height="60" as="geometry"/>
          </mxCell>

          <!-- SG badges -->
          <mxCell id="sgWebA" value="SG-Web (80/22)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#1976D2;align=center;fontSize=10;" vertex="1" parent="pubA1">
            <mxGeometry x="200" y="10" width="120" height="24" as="geometry"/>
          </mxCell>
          <mxCell id="sgDbA" value="SG-DB (3306 from VPC)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#8E24AA;align=center;fontSize=10;" vertex="1" parent="privA1">
            <mxGeometry x="20" y="10" width="150" height="24" as="geometry"/>
          </mxCell>

        <!-- Secondary Region -->
        <mxCell id="regionB" value="Secondary Region — us-east-1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#D81B60;fontStyle=1;align=left;spacing=8;" vertex="1" parent="1">
          <mxGeometry x="1000" y="200" width="700" height="640" as="geometry"/>
        </mxCell>

          <!-- S3 Destination (regional) -->
          <mxCell id="s3_dst" value="S3 (Destination)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0288D1;align=center;" vertex="1" parent="regionB">
            <mxGeometry x="470" y="40" width="200" height="70" as="geometry"/>
          </mxCell>

          <!-- VPC -->
          <mxCell id="vpcB" value="VPC" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8BBD0;strokeColor=#AD1457;align=left;spacing=8;" vertex="1" parent="regionB">
            <mxGeometry x="20" y="120" width="660" height="480" as="geometry"/>
          </mxCell>

          <!-- Public Subnets -->
          <mxCell id="pubB1" value="Public Subnet A" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#FB8C00;align=left;spacing=6;" vertex="1" parent="vpcB">
            <mxGeometry x="20" y="20" width="300" height="190" as="geometry"/>
          </mxCell>
          <mxCell id="pubB2" value="Public Subnet B" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#FB8C00;align=left;spacing=6;" vertex="1" parent="vpcB">
            <mxGeometry x="340" y="20" width="300" height="190" as="geometry"/>
          </mxCell>

          <!-- ASG + EC2 -->
          <mxCell id="asgB" value="ASG (desired=1)" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;strokeColor=#AD1457;align=center;" vertex="1" parent="vpcB">
            <mxGeometry x="240" y="0" width="180" height="30" as="geometry"/>
          </mxCell>
          <mxCell id="ec2B1" value="EC2 (NGINX)" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#AD1457;align=center;" vertex="1" parent="pubB1">
            <mxGeometry x="40" y="80" width="140" height="50" as="geometry"/>
          </mxCell>

        <!-- CRR Edge (S3 Source → Destination) with Role -->
        <mxCell id="crr" value="S3 Cross-Region Replication (CRR)&#xa;IAM Replication Role" style="endArrow=block;endFill=1;strokeColor=#0288D1;fontStyle=1;" edge="1" parent="1" source="s3_src" target="s3_dst">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Client to Regions via DNS -->
        <mxCell id="edge_dns_prim" value="Primary (A/Failover)" style="endArrow=block;endFill=1;strokeColor=#2E7D32;" edge="1" parent="1" source="internet" target="ec2A1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="edge_dns_sec" value="Secondary (Failover)" style="endArrow=block;endFill=1;dashed=1;strokeColor=#2E7D32;" edge="1" parent="1" source="internet" target="ec2B1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- App → DB connectivity -->
        <mxCell id="edge_app_db" value="3306" style="endArrow=block;endFill=1;strokeColor=#8E24AA;" edge="1" parent="1" source="ec2A1" target="rdsA">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Metrics to CloudWatch -->
        <mxCell id="edge_metrics_asgA" value="ASG Metrics" style="endArrow=block;endFill=1;strokeColor=#5E35B1;dashed=1;" edge="1" parent="1" source="asgA" target="cw">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="edge_metrics_ec2A" value="EC2 Metrics" style="endArrow=block;endFill=1;strokeColor=#5E35B1;dashed=1;" edge="1" parent="1" source="ec2A1" target="cw">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend" value="Legend&#xa;Solid = Primary path&#xa;Dashed = Standby/Failover&#xa;Blue = Storage&#xa;Green = Private&#xa;Orange = Public&#xa;Purple = DB&#xa;Yellow = Notifications" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#9E9E9E;align=left;spacing=8;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1560" y="230" width="320" height="160" as="geometry"/>
        </mxCell>

        <!-- Optional components (dashed) -->
        <mxCell id="waf" value="WAF (optional)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#C62828;dashed=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="520" y="80" width="140" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="kms" value="KMS (S3/RDS keys)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFDE7;strokeColor=#F57F17;dashed=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="1460" y="120" width="80" height="60" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
